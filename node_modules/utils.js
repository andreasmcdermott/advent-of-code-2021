const fs = require("fs");
const path = require("path");
const readline = require('readline');

const defaultMapLineFn = line => line;

const input = (mapLineFn = defaultMapLineFn) => {
  let dayDir = process.argv[1];
  const {dir, ext} = path.parse(dayDir);
  if (ext !== '') {
    dayDir = dir;
  }
  const content = fs.readFileSync(path.resolve(dayDir, 'input.txt'), "utf8");
  return content.split("\n").filter((line) => line.trim() !== "").map(mapLineFn);
};

const print = (part1, part2) => {
  console.log("Result Part 1: ", part1);
  if (part2) console.log("Result Part 2: ", part2);
};

const waitForInput = () => {
  const rl = readline.createInterface({input: process.stdin, outout: process.stdout});
  return new Promise(resolve => rl.question('Ready?', () => {
    rl.close();
    resolve();
  }));
}

module.exports = { print, input, waitForInput };
